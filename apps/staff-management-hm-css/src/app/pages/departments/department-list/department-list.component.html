<form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
  <nz-form-item>
    <nz-form-label [nzSpan]="5" nzFor="name">名字</nz-form-label>
    <nz-form-control [nzSpan]="12" nzErrorTip="请输入员工姓名">
      <input id="name" type="text" nz-input formControlName="name" />
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSpan]="7" nzFor="month">月份</nz-form-label>
    <nz-form-control [nzSpan]="12" nzErrorTip="请选择月份">
      <nz-select
        id="month"
        formControlName="month"
        nzPlaceHolder="选择一个月份"
        (ngModelChange)="genderChange($event)"
      >
        <nz-option
          *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]"
          nzValue="{{ i }}"
          nzLabel="{{ i }}月"
        ></nz-option>
      </nz-select>
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSpan]="5" nzFor="less">少于</nz-form-label>
    <nz-form-control [nzSpan]="12" nzErrorTip="出勤少于">
      <input id="less" type="text" nz-input formControlName="less" />
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSpan]="5" nzFor="more">多于</nz-form-label>
    <nz-form-control [nzSpan]="12" nzErrorTip="出勤多于">
      <input id="more" type="text" nz-input formControlName="more" />
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-control [nzSpan]="12" [nzOffset]="5">
      <button nz-button nzType="primary">搜索</button>
    </nz-form-control>
  </nz-form-item>
</form>
<nz-table
  #fixedTable
  [nzData]="listOfData"
  [nzScroll]="{ x: '1150px', y: '50vh' }"
>
  <thead>
    <tr>
      <th nzLeft>id</th>
      <th nzLeft>员工</th>
      <th nzLeft>月份</th>
      <th nzLeft>出勤天数</th>
      <th nzRight>操作</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of fixedTable.data">
      <ng-container *ngIf="!editCache[data.id].edit && listOfData.length < 1">
        <nz-empty></nz-empty>
      </ng-container>
      <ng-container
        *ngIf="
          !editCache[data.id].edit && listOfData.length > 0;
          else editTemplate
        "
      >
        <td nzLeft>{{ data.id }}</td>
        <td nzLeft>{{ data.name }}</td>
        <td nzLeft>{{ data.month }}</td>
        <td>{{ data.attendance_day_num }}</td>
        <td><a (click)="startEdit(data.id)">编辑</a></td>
      </ng-container>
      <ng-template #editTemplate>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.id"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.name"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.month"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.attendance_day_num"
          />
        </td>
        <td>
          <a (click)="saveEdit(data.id)" class="save">保存</a>
          <a
            nz-popconfirm
            nzPopconfirmTitle="确定取消?"
            (nzOnConfirm)="cancelEdit(data.id)"
            >取消</a
          >
        </td>
      </ng-template>
    </tr>
  </tbody>
</nz-table>
